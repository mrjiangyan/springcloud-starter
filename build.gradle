allprojects {
    apply plugin: 'maven'
    apply plugin: 'maven-publish'
    apply plugin: 'java'

    group = 'com.touchbiz.starter'
    version = '1.0'
    buildscript {
        ext {
            commonLang3Version = '3.10'
            aspectjVersion = '1.9.5'
            springBootVersion = '2.3.2.RELEASE'
            springVersion = '5.2.8.RELEASE'
            springCloudVersion = '2.1.2.RELEASE'
            mavenUserName = '5f573af3e1cf498f370573c8'
            mavenPassword = 'WDwiza3S(oFV'
            lombokVersion = '1.18.12'
            nacosStarterVersion = '2.1.0.RELEASE'
            swaggerVersion = '3.0.0'
            swaggerLayerVersion = '1.1.3'
            commonEntityVersion = '1.2.RELEASE'
            commonVersion = '1.2.RELEASE'
            mybatisVersion = '2.1.3'
            druidVersion = '1.2.3'
            tkVersion = '4.1.5'
            oneVersion = '1.8.6.Final'
            feignVersion = "10.10.1"
            openFeignVersion = '2.2.3.RELEASE'
            validationVersion = '2.0.1.Final'
            mysqlVerision = '8.0.20'
            revision = '1.2.RELEASE'
            jacksonVersion = '2.11.1'
            repositoryUrl = 'https://packages.aliyun.com/maven/repository/2031284-release-KDf3XN/'

        }
        repositories {
            mavenCentral()
        }


    }


}


/**所有子项目应用Java插件*/

subprojects {
    apply plugin: 'maven'
    apply plugin: 'maven-publish'
    apply plugin: 'java'

    sourceCompatibility = '1.8'
    group = 'com.touchbiz.starter'
    version = "${ revision }"

    repositories {
        google()
        jcenter()
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
        maven { url 'https://repo.spring.io/snapshot' }
        maven { url 'https://repo.spring.io/milestone' }
        mavenCentral()
        maven {
            credentials {
                username "$mavenUserName"
                password "$mavenPassword"
            }
            url 'https://packages.aliyun.com/maven/repository/2031284-release-KDf3XN/'
        }
    }


    configurations {
        compileOnly {
            extendsFrom annotationProcessor
        }
    }

    //打包源代码
    task sourcesJar(type: Jar, dependsOn: classes) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }

    configurations.all {
        exclude group: "org.springframework.boot", module: "spring-boot-starter-tomcat"
        exclude group: "io.undertow", module: "undertow-websockets-jsr"
        exclude group: "io.springfox", module:"springfox-swagger-ui"
    }

    [compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

    artifacts {
        archives sourcesJar
    }

    dependencies {
        compileOnly group: 'org.projectlombok', name: 'lombok', version: "${ lombokVersion }"
        annotationProcessor group: 'org.projectlombok', name: 'lombok', version: "${ lombokVersion }"
    }

}